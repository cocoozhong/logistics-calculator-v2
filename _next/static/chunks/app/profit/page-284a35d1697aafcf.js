(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[993],{3845:function(e,t,s){Promise.resolve().then(s.bind(s,465))},465:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return k}});var a=s(7437),r=s(2265),n=s(5754),l=s(1961),i=s(2919),c=s(1396),o=s.n(c),d=s(7815),m=s(5179);let u=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("label",{ref:t,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 ".concat(s||""),...r})});u.displayName="Label";var x=s(6224);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let p=(0,s(2898).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);function f(e){return e.toFixed(2)}async function h(e){try{return await navigator.clipboard.writeText(e),!0}catch(e){return console.error("复制失败:",e),!1}}function g(e){try{let t=j();if(!t.some(t=>{if(t.type!==e.type)return!1;let s=t.inputs,a=e.inputs;return"n-point"===e.type?s.cost===a.cost&&s.profitRate===a.profitRate:"profit-point"===e.type&&s.cost===a.cost&&s.price===a.price})){let s=[e,...t].slice(0,5);localStorage.setItem("profit_calculation_history",JSON.stringify(s))}}catch(e){console.error("保存历史记录失败:",e)}}function j(){try{let e=localStorage.getItem("profit_calculation_history");return e?JSON.parse(e):[]}catch(e){return console.error("获取历史记录失败:",e),[]}}let y=r.memo(function(e){let{onHistoryUpdate:t}=e,[s,l]=(0,r.useState)({cost:0,profitRate:0,taxRate:0}),[i,c]=(0,r.useState)(null),[o,j]=(0,r.useState)(null),[y,N]=(0,r.useState)(null),[b,v]=(0,r.useState)("");(0,r.useEffect)(()=>{if(s.cost>0&&s.profitRate>0){let e=function(e){let{cost:t,profitRate:s}=e;if(t<=0||s<0||s>=100)return null;let a=t/(1-s/100);return{profit:Math.round(100*(a-t))/100,price:Math.round(100*a)/100,taxPrice:0}}(s);j(e),i&&clearTimeout(i),c(setTimeout(()=>{if(e){let a="".concat(s.cost,"-").concat(s.profitRate);a!==b&&(g({id:Date.now().toString(),type:"n-point",inputs:{...s},outputs:{...e},timestamp:Date.now()}),v(a),null==t||t())}},3e3))}else j({profit:0,price:0,taxPrice:0});return()=>{i&&clearTimeout(i)}},[s,t]);let w=(0,r.useCallback)((e,t)=>{let s=parseFloat(t)||0;l(t=>({...t,[e]:s}))},[]),k=(0,r.useCallback)(async(e,t)=>{await h(e)&&(N(t),setTimeout(()=>N(null),2e3))},[]),C=(0,r.useCallback)(()=>{l({cost:0,profitRate:0,taxRate:0}),j(null)},[]);return(0,a.jsxs)(d.Zb,{className:"w-full",children:[(0,a.jsxs)(d.Ol,{className:"pb-3 md:pb-6",children:[(0,a.jsx)(d.ll,{className:"text-green-600 text-lg md:text-xl",children:"N点售价"}),(0,a.jsx)(d.SZ,{className:"text-sm",children:"根据产品成本、期望利润率计算售价"})]}),(0,a.jsxs)(d.aY,{className:"space-y-3 md:space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-3 md:space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(u,{htmlFor:"cost",className:"text-sm",children:"产品人民币成本:"}),(0,a.jsx)(m.I,{id:"cost",type:"number",step:"0.01",value:s.cost||"",onChange:e=>w("cost",e.target.value),placeholder:"请输入成本",className:"mt-1"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(u,{htmlFor:"profitRate",className:"text-sm",children:"利润点(%):"}),(0,a.jsx)(m.I,{id:"profitRate",type:"number",step:"0.01",value:s.profitRate||"",onChange:e=>w("profitRate",e.target.value),placeholder:"请输入利润率",className:"mt-1"})]})]}),(0,a.jsxs)("div",{className:"space-y-2 md:space-y-3 pt-3 md:pt-4 border-t",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,a.jsxs)("span",{className:"text-sm font-medium flex-1 truncate",children:["利润: ",o?f(o.profit):"0.00"," RMB"]}),(0,a.jsx)(n.z,{size:"sm",variant:"outline",onClick:()=>k(o?f(o.profit):"0.00","profit"),className:"h-7 w-7 md:h-8 md:w-8 p-0 flex-shrink-0",children:(0,a.jsx)(x.Z,{className:"h-3 w-3 md:h-4 md:w-4"})})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,a.jsxs)("span",{className:"text-sm font-medium flex-1 truncate",children:["人民币售价: ",o?f(o.price):"0.00"," RMB"]}),(0,a.jsx)(n.z,{size:"sm",variant:"outline",onClick:()=>k(o?f(o.price):"0.00","price"),className:"h-7 w-7 md:h-8 md:w-8 p-0 flex-shrink-0",children:(0,a.jsx)(x.Z,{className:"h-3 w-3 md:h-4 md:w-4"})})]}),y&&(0,a.jsx)("div",{className:"text-xs text-green-600 bg-green-50 p-2 rounded",children:"已复制到剪贴板"})]}),(0,a.jsx)("div",{className:"pt-4",children:(0,a.jsxs)(n.z,{onClick:C,variant:"outline",className:"w-full",children:[(0,a.jsx)(p,{className:"h-4 w-4 mr-2"}),"清空"]})})]})]})}),N=r.memo(function(e){let{onHistoryUpdate:t}=e,[s,l]=(0,r.useState)({cost:0,price:0}),[i,c]=(0,r.useState)(null),[o,j]=(0,r.useState)(null),[y,N]=(0,r.useState)(null),[b,v]=(0,r.useState)("");(0,r.useEffect)(()=>{if(s.cost>0&&s.price>0){let e=function(e){let{cost:t,price:s}=e;return t<=0||s<=0?null:{profitRate:Math.round((s-t)/s*1e4)/100}}(s);c(e),y&&clearTimeout(y),N(setTimeout(()=>{if(e){let a="".concat(s.cost,"-").concat(s.price);a!==b&&(g({id:Date.now().toString(),type:"profit-point",inputs:{...s},outputs:{...e},timestamp:Date.now()}),v(a),null==t||t())}},3e3))}else c({profitRate:0});return()=>{y&&clearTimeout(y)}},[s,t]);let w=(0,r.useCallback)((e,t)=>{let s=parseFloat(t)||0;l(t=>({...t,[e]:s}))},[]),k=(0,r.useCallback)(async(e,t)=>{await h(e)&&(j(t),setTimeout(()=>j(null),2e3))},[]),C=(0,r.useCallback)(()=>{l({cost:0,price:0}),c(null)},[]);return(0,a.jsxs)(d.Zb,{className:"w-full",children:[(0,a.jsxs)(d.Ol,{className:"pb-3 md:pb-6",children:[(0,a.jsx)(d.ll,{className:"text-green-600 text-lg md:text-xl",children:"赚几个点"}),(0,a.jsx)(d.SZ,{className:"text-sm",children:"根据成本和售价反推利润率"})]}),(0,a.jsxs)(d.aY,{className:"space-y-3 md:space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-3 md:space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(u,{htmlFor:"cost",className:"text-sm",children:"产品人民币成本:"}),(0,a.jsx)(m.I,{id:"cost",type:"number",step:"0.01",value:s.cost||"",onChange:e=>w("cost",e.target.value),placeholder:"请输入成本",className:"mt-1"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(u,{htmlFor:"price",className:"text-sm",children:"产品人民币售价:"}),(0,a.jsx)(m.I,{id:"price",type:"number",step:"0.01",value:s.price||"",onChange:e=>w("price",e.target.value),placeholder:"请输入售价",className:"mt-1"})]})]}),(0,a.jsxs)("div",{className:"space-y-2 md:space-y-3 pt-3 md:pt-4 border-t",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,a.jsxs)("span",{className:"text-sm font-medium flex-1 truncate",children:["利润点: ",i?f(i.profitRate):"0.00","%"]}),(0,a.jsx)(n.z,{size:"sm",variant:"outline",onClick:()=>k(i?f(i.profitRate)+"%":"0.00%","profitRate"),className:"h-7 w-7 md:h-8 md:w-8 p-0 flex-shrink-0",children:(0,a.jsx)(x.Z,{className:"h-3 w-3 md:h-4 md:w-4"})})]}),o&&(0,a.jsx)("div",{className:"text-xs text-green-600 bg-green-50 p-2 rounded",children:"已复制到剪贴板"})]}),(0,a.jsx)("div",{className:"pt-4",children:(0,a.jsxs)(n.z,{onClick:C,variant:"outline",className:"w-full",children:[(0,a.jsx)(p,{className:"h-4 w-4 mr-2"}),"清空"]})})]})]})});function b(e){let{className:t,variant:s="default",...r}=e;return(0,a.jsx)("div",{className:"".concat("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors"," ").concat({default:"border-transparent bg-blue-600 text-white",secondary:"border-transparent bg-gray-100 text-gray-900",destructive:"border-transparent bg-red-600 text-white",outline:"text-gray-900 border-gray-200"}[s]," ").concat(t||""),...r})}var v=s(6141);function w(e){let{onRecordClick:t,type:s}=e,[l,i]=(0,r.useState)([]),c=()=>{let e=j();i(s?e.filter(e=>e.type===s):e)};(0,r.useEffect)(()=>{c()},[]);let o=e=>new Date(e).toLocaleString("zh-CN",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),m=e=>"n-point"===e.type?"成本:".concat(f(e.inputs.cost)," 利润点:").concat(f(e.inputs.profitRate),"% 利润:").concat(f(e.outputs.profit)," 售价:").concat(f(e.outputs.price)):"成本:".concat(f(e.inputs.cost)," 售价:").concat(f(e.inputs.price)," 利润点:").concat(f(e.outputs.profitRate),"%");return(0,a.jsxs)(d.Zb,{className:"w-full",children:[(0,a.jsxs)(d.Ol,{className:"pb-3 md:pb-6",children:[(0,a.jsxs)(d.ll,{className:"flex items-center justify-between text-lg md:text-xl",children:[(0,a.jsx)("span",{className:"text-sm md:text-base",children:"n-point"===s?"N点售价历史":"profit-point"===s?"赚几个点历史":"计算历史"}),l.length>0&&(0,a.jsxs)(n.z,{size:"sm",variant:"outline",onClick:()=>{!function(){try{localStorage.removeItem("profit_calculation_history")}catch(e){console.error("清空历史记录失败:",e)}}(),i([])},className:"h-7 md:h-8 text-xs md:text-sm",children:[(0,a.jsx)(p,{className:"h-3 w-3 md:h-4 md:w-4 mr-1"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"清空"})]})]}),(0,a.jsx)(d.SZ,{className:"text-xs md:text-sm",children:"最近的计算记录，点击可快速填入"})]}),(0,a.jsx)(d.aY,{children:0===l.length?(0,a.jsx)("div",{className:"text-center text-gray-500 py-6 md:py-8 text-sm",children:"暂无计算记录"}):(0,a.jsx)("div",{className:"space-y-2 md:space-y-3",children:l.map((e,s)=>(0,a.jsx)("div",{className:"p-2 md:p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>null==t?void 0:t(e),children:(0,a.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1 md:gap-2 mb-1",children:[(0,a.jsxs)(b,{variant:"n-point"===e.type?"default":"secondary",className:"text-xs",children:["#",s+1]}),(0,a.jsx)("span",{className:"text-xs md:text-sm text-gray-600",children:"n-point"===e.type?"N点售价":"赚几个点"})]}),(0,a.jsx)("div",{className:"text-xs md:text-sm text-gray-800 break-words",children:m(e)})]}),(0,a.jsxs)("div",{className:"flex items-center text-xs text-gray-500 flex-shrink-0",children:[(0,a.jsx)(v.Z,{className:"h-3 w-3 mr-1"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:o(e.timestamp)}),(0,a.jsx)("span",{className:"sm:hidden",children:new Date(e.timestamp).toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"})})]})]})},e.id))})})]})}function k(){let[e,t]=(0,r.useState)(0),s=()=>{t(e=>e+1)},c=e=>{console.log("点击历史记录:",e)};return(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 py-4 md:py-8",children:(0,a.jsxs)("div",{className:"container mx-auto px-3 md:px-4 max-w-7xl",children:[(0,a.jsx)("div",{className:"flex justify-center mb-6 md:mb-8",children:(0,a.jsxs)("div",{className:"flex bg-white rounded-lg p-1 shadow-sm border w-full max-w-sm",children:[(0,a.jsx)(n.z,{asChild:!0,variant:"ghost",className:"flex-1 flex items-center justify-center gap-1 md:gap-2 text-xs md:text-sm",children:(0,a.jsxs)(o(),{href:"/",children:[(0,a.jsx)(l.Z,{className:"h-3 w-3 md:h-4 md:w-4"}),(0,a.jsx)("span",{children:"物流计算器"})]})}),(0,a.jsx)(n.z,{asChild:!0,variant:"default",className:"flex-1 flex items-center justify-center gap-1 md:gap-2 text-xs md:text-sm",children:(0,a.jsxs)(o(),{href:"/profit",children:[(0,a.jsx)(i.Z,{className:"h-3 w-3 md:h-4 md:w-4"}),(0,a.jsx)("span",{children:"利润计算器"})]})})]})}),(0,a.jsxs)("div",{className:"text-center mb-6 md:mb-8",children:[(0,a.jsx)("h1",{className:"text-2xl md:text-3xl font-bold text-blue-600 mb-2",children:"利润计算器"}),(0,a.jsx)("p",{className:"text-sm md:text-base text-gray-600",children:"智能计算产品利润和定价"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-4 md:gap-6",children:[(0,a.jsxs)("div",{className:"space-y-4 md:space-y-6",children:[(0,a.jsx)(y,{onHistoryUpdate:s}),(0,a.jsx)(w,{onRecordClick:c,type:"n-point"},e)]}),(0,a.jsxs)("div",{className:"space-y-4 md:space-y-6",children:[(0,a.jsx)(N,{onHistoryUpdate:s}),(0,a.jsx)(w,{onRecordClick:c,type:"profit-point"},e)]})]})]})})}},5754:function(e,t,s){"use strict";s.d(t,{z:function(){return o}});var a=s(7437),r=s(2265),n=s(7256),l=s(6061),i=s(1657);let c=(0,l.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=r.forwardRef((e,t)=>{let{className:s,variant:r,size:l,asChild:o=!1,...d}=e,m=o?n.g7:"button";return(0,a.jsx)(m,{className:(0,i.cn)(c({variant:r,size:l,className:s})),ref:t,...d})});o.displayName="Button"},7815:function(e,t,s){"use strict";s.d(t,{Ol:function(){return i},SZ:function(){return o},Zb:function(){return l},aY:function(){return d},ll:function(){return c}});var a=s(7437),r=s(2265),n=s(1657);let l=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...r})});l.displayName="Card";let i=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s),...r})});i.displayName="CardHeader";let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",s),...r})});c.displayName="CardTitle";let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",s),...r})});o.displayName="CardDescription";let d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",s),...r})});d.displayName="CardContent",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",s),...r})}).displayName="CardFooter"},5179:function(e,t,s){"use strict";s.d(t,{I:function(){return l}});var a=s(7437),r=s(2265),n=s(1657);let l=r.forwardRef((e,t)=>{let{className:s,type:r,...l}=e;return(0,a.jsx)("input",{type:r,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...l})});l.displayName="Input"},1657:function(e,t,s){"use strict";s.d(t,{cn:function(){return n}});var a=s(7042),r=s(4769);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.m6)((0,a.W)(t))}}},function(e){e.O(0,[849,971,938,744],function(){return e(e.s=3845)}),_N_E=e.O()}]);